
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   13.0   Copyright 1985-2013 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

2-user 16-core Stata network perpetual license:
       Serial number:  501306200703
         Licensed to:  HPC, ITS
                       New York University, NY

Notes:
      1.  (-v# option or -set maxvar-) 5000 maximum variables
      2.  Command line editing disabled
      3.  Stata running in batch mode

Note:  Your site can add messages to the introduction by editing the file
       stata.msg in the directory where Stata is installed.

. do 130812_regressions_allyears_tenuredays.do 

. * REGRESSIONS IN ALL YEARS
. * USE THE DEFINITION OF TENURE BASED ON THE DAYS WORKED and SEPARATION IN THA
> T YEAR
. 
. local filepath "/scratch/kb103/stata/earnings_losses"

. 
. * CREATE FILES THE REGRESSIONS
. /*
> forval yy = 1976/2005{
> 
>         use "`filepath'/control_treatment_ind_year`yy'.dta"
>         keep if CG5_men==1 | CG5_women==1
>         keep pid CG5*
>         by pid: gen int index = _n
>         keep if index==1
>         drop index
>         saveold "`filepath'/EL_pid_CG5`yy'.dta", replace
> 
>         use "`filepath'/control_treatment_ind_year`yy'.dta"
>         keep if TG5_men==1 | TG5_women==1
>         by pid: gen int index = _n
>         keep if index == 1
>         drop index
>         keep pid TG5*
>         saveold "`filepath'/EL_pid_TG5`yy'.dta", replace
>         
> }
> */
. * REGRESSION FILES
. 
. forval yy = 1976/2003{  
  2. 
.         * DEAL WITH DUPLICATE OBSERVATIONS - IF A WORKER IS IN MORE THAN ONE 
> TREATMENT/CONTROL GROUP
.         local endy = `yy'+2
  3.         local begy = `yy'+1
  4.         use "`filepath'/EL_pid_CG5`yy'.dta"     
  5.         forval yy1 = `yy'/`endy'{
  6.                 append using "`filepath'/EL_pid_TG5`yy1'.dta"
  7.         }
  8.         keep pid 
  9.         sort pid
 10.         by pid: gen int index = _n
 11.         by pid: egen int maxindex = max(index)
 12.         drop if maxindex>1
 13.         keep if index==1
 14.         keep pid
 15.         save  "`filepath'/EL_`yy'_CTG5tokeep.dta", replace
 16.         
.         * CREATE A FILE FOR REGRESSION
.         clear
 17.         use "`filepath'/EL_annual_income_year`yy'.dta" 
 18.         keep if CG5_men==1 | CG5_women==1 | TG5_men==1 | TG5_women==1
 19.         forval yy1 = `begy'/`endy'{
 20.                 append using "`filepath'/EL_annual_income_year`yy1'.dta"
 21.         }
 22.         merge m:1 pid using "`filepath'/EL_`yy'_CTG5tokeep.dta"
 23.         keep if _merge==3
 24.         drop _merge
 25.   
.         save "`filepath'/regression_annual_income_year_CTG5`yy'.dta" , replac
> e
 26.         
. }
(11988 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1976_CTG5tokeep.dta saved
(3750434 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,946,452
        from master                13,945,509  (_merge==1)
        from using                        943  (_merge==2)

    matched                        39,770,468  (_merge==3)
    -----------------------------------------
(13946452 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5197
> 6.dta saved
(13080 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1977_CTG5tokeep.dta saved
(2987424 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,053,196
        from master                13,052,300  (_merge==1)
        from using                        896  (_merge==2)

    matched                        43,599,465  (_merge==3)
    -----------------------------------------
(13053196 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5197
> 7.dta saved
(11154 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1978_CTG5tokeep.dta saved
(3131316 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    12,857,548
        from master                12,856,687  (_merge==1)
        from using                        861  (_merge==2)

    matched                        45,658,084  (_merge==3)
    -----------------------------------------
(12857548 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5197
> 8.dta saved
(19362 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1979_CTG5tokeep.dta saved
(3248424 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,633,547
        from master                13,632,740  (_merge==1)
        from using                        807  (_merge==2)

    matched                        46,823,815  (_merge==3)
    -----------------------------------------
(13633547 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5197
> 9.dta saved
(15662 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1980_CTG5tokeep.dta saved
(3102022 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    14,371,581
        from master                14,370,796  (_merge==1)
        from using                        785  (_merge==2)

    matched                        48,750,792  (_merge==3)
    -----------------------------------------
(14371581 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 0.dta saved
(17218 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1981_CTG5tokeep.dta saved
(3417372 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    15,062,271
        from master                15,061,532  (_merge==1)
        from using                        739  (_merge==2)

    matched                        50,700,821  (_merge==3)
    -----------------------------------------
(15062271 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 1.dta saved
(10100 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1982_CTG5tokeep.dta saved
(3711210 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    14,433,233
        from master                14,432,536  (_merge==1)
        from using                        697  (_merge==2)

    matched                        53,156,875  (_merge==3)
    -----------------------------------------
(14433233 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 2.dta saved
(11144 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1983_CTG5tokeep.dta saved
(3578925 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,464,305
        from master                13,463,655  (_merge==1)
        from using                        650  (_merge==2)

    matched                        55,518,985  (_merge==3)
    -----------------------------------------
(13464305 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 3.dta saved
(12383 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1984_CTG5tokeep.dta saved
(2996903 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    12,686,829
        from master                12,686,198  (_merge==1)
        from using                        631  (_merge==2)

    matched                        57,459,800  (_merge==3)
    -----------------------------------------
(12686829 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 4.dta saved
(15148 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1985_CTG5tokeep.dta saved
(2949732 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    12,843,084
        from master                12,842,425  (_merge==1)
        from using                        659  (_merge==2)

    matched                        57,472,798  (_merge==3)
    -----------------------------------------
(12843084 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 5.dta saved
(52108 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1986_CTG5tokeep.dta saved
(2998447 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    14,170,786
        from master                14,170,151  (_merge==1)
        from using                        635  (_merge==2)

    matched                        56,629,498  (_merge==3)
    -----------------------------------------
(14170786 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 6.dta saved
(19498 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1987_CTG5tokeep.dta saved
(3193481 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,320,163
        from master                13,319,581  (_merge==1)
        from using                        582  (_merge==2)

    matched                        56,780,319  (_merge==3)
    -----------------------------------------
(13320163 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 7.dta saved
(15781 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1988_CTG5tokeep.dta saved
(2999568 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    12,901,236
        from master                12,900,691  (_merge==1)
        from using                        545  (_merge==2)

    matched                        57,400,738  (_merge==3)
    -----------------------------------------
(12901236 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 8.dta saved
(13394 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1989_CTG5tokeep.dta saved
(2831586 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    14,099,011
        from master                14,098,534  (_merge==1)
        from using                        477  (_merge==2)

    matched                        55,813,897  (_merge==3)
    -----------------------------------------
(14099011 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5198
> 9.dta saved
(16938 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1990_CTG5tokeep.dta saved
(3421894 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    15,002,864
        from master                15,002,433  (_merge==1)
        from using                        431  (_merge==2)

    matched                        54,879,149  (_merge==3)
    -----------------------------------------
(15002864 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 0.dta saved
(26902 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1991_CTG5tokeep.dta saved
(3437387 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    15,479,780
        from master                15,479,403  (_merge==1)
        from using                        377  (_merge==2)

    matched                        55,002,192  (_merge==3)
    -----------------------------------------
(15479780 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 1.dta saved
(22242 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1992_CTG5tokeep.dta saved
(3457600 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    14,708,936
        from master                14,708,600  (_merge==1)
        from using                        336  (_merge==2)

    matched                        56,072,555  (_merge==3)
    -----------------------------------------
(14708936 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 2.dta saved
(21881 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1993_CTG5tokeep.dta saved
(3251223 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,898,022
        from master                13,897,721  (_merge==1)
        from using                        301  (_merge==2)

    matched                        57,181,391  (_merge==3)
    -----------------------------------------
(13898022 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 3.dta saved
(25240 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1994_CTG5tokeep.dta saved
(2972305 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,685,745
        from master                13,685,472  (_merge==1)
        from using                        273  (_merge==2)

    matched                        57,771,599  (_merge==3)
    -----------------------------------------
(13685745 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 4.dta saved
(25545 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1995_CTG5tokeep.dta saved
(2977336 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    13,861,858
        from master                13,861,605  (_merge==1)
        from using                        253  (_merge==2)

    matched                        57,557,499  (_merge==3)
    -----------------------------------------
(13861858 observations deleted)
file /scratch/kb103/stata/earnings_losses/regression_annual_income_year_CTG5199
> 5.dta saved
(20503 observations deleted)
(0 observations deleted)
file /scratch/kb103/stata/earnings_losses/EL_1996_CTG5tokeep.dta saved
(2956410 observations deleted)

    Result                           # of obs.
    -----------------------------------------
    not matched                    12,697,409
        from master                12,697,184  (_merge==1)
        from using                        225  (_merge==2)

    matched                        58,016,676  (_merge==3)
    -----------------------------------------
